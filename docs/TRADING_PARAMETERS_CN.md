# ğŸ“‹ äº¤æ˜“å‚æ•°å‚è€ƒæ‰‹å†Œ

æœ¬æ–‡æ¡£æä¾› Sol Trade SDK ä¸­æ‰€æœ‰äº¤æ˜“å‚æ•°çš„å®Œæ•´å‚è€ƒè¯´æ˜ã€‚

## ğŸ“‹ ç›®å½•

- [TradeBuyParams](#tradebuyparams)
- [TradeSellParams](#tradesellparams)
- [å‚æ•°åˆ†ç±»](#å‚æ•°åˆ†ç±»)
- [é‡è¦è¯´æ˜](#é‡è¦è¯´æ˜)

## TradeBuyParams

`TradeBuyParams` ç»“æ„ä½“åŒ…å«åœ¨ä¸åŒ DEX åè®®ä¸Šæ‰§è¡Œä¹°å…¥è®¢å•æ‰€éœ€çš„æ‰€æœ‰å‚æ•°ã€‚

### åŸºç¡€äº¤æ˜“å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…éœ€ | æè¿° |
|------|------|------|------|
| `dex_type` | `DexType` | âœ… | è¦ä½¿ç”¨çš„äº¤æ˜“åè®® (PumpFun, PumpSwap, Bonk, RaydiumCpmm, RaydiumAmmV4) |
| `mint` | `Pubkey` | âœ… | è¦è´­ä¹°çš„ä»£å¸ mint å…¬é’¥ |
| `sol_amount` | `u64` | âœ… | è¦èŠ±è´¹çš„ SOL æ•°é‡ï¼ˆä»¥ lamports ä¸ºå•ä½ï¼‰ |
| `slippage_basis_points` | `Option<u64>` | âŒ | æ»‘ç‚¹å®¹å¿åº¦ï¼ˆåŸºç‚¹å•ä½ï¼Œä¾‹å¦‚ 100 = 1%, 500 = 5%ï¼‰ |
| `recent_blockhash` | `Hash` | âœ… | ç”¨äºäº¤æ˜“æœ‰æ•ˆæ€§çš„æœ€æ–°åŒºå—å“ˆå¸Œ |
| `extension_params` | `Box<dyn ProtocolParams>` | âœ… | åè®®ç‰¹å®šå‚æ•° (PumpFunParams, PumpSwapParams ç­‰) |

### é«˜çº§é…ç½®å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…éœ€ | æè¿° |
|------|------|------|------|
| `custom_cu_limit` | `Option<u32>` | âŒ | äº¤æ˜“çš„è‡ªå®šä¹‰è®¡ç®—å•å…ƒé™åˆ¶ |
| `lookup_table_key` | `Option<Pubkey>` | âŒ | ç”¨äºäº¤æ˜“ä¼˜åŒ–çš„åœ°å€æŸ¥æ‰¾è¡¨é”® |
| `wait_transaction_confirmed` | `bool` | âœ… | æ˜¯å¦ç­‰å¾…äº¤æ˜“ç¡®è®¤ |
| `create_wsol_ata` | `bool` | âœ… | æ˜¯å¦åˆ›å»º wSOL å…³è”ä»£å¸è´¦æˆ· |
| `close_wsol_ata` | `bool` | âœ… | äº¤æ˜“åæ˜¯å¦å…³é—­ wSOL ATA |
| `create_mint_ata` | `bool` | âœ… | æ˜¯å¦åˆ›å»ºä»£å¸ mint ATA |
| `open_seed_optimize` | `bool` | âœ… | æ˜¯å¦ä½¿ç”¨ seed ä¼˜åŒ–ä»¥å‡å°‘ CU æ¶ˆè€— |


## TradeSellParams

`TradeSellParams` ç»“æ„ä½“åŒ…å«åœ¨ä¸åŒ DEX åè®®ä¸Šæ‰§è¡Œå–å‡ºè®¢å•æ‰€éœ€çš„æ‰€æœ‰å‚æ•°ã€‚

### åŸºç¡€äº¤æ˜“å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…éœ€ | æè¿° |
|------|------|------|------|
| `dex_type` | `DexType` | âœ… | è¦ä½¿ç”¨çš„äº¤æ˜“åè®® (PumpFun, PumpSwap, Bonk, RaydiumCpmm, RaydiumAmmV4) |
| `mint` | `Pubkey` | âœ… | è¦å‡ºå”®çš„ä»£å¸ mint å…¬é’¥ |
| `token_amount` | `u64` | âœ… | è¦å‡ºå”®çš„ä»£å¸æ•°é‡ï¼ˆæœ€å°ä»£å¸å•ä½ï¼‰ |
| `slippage_basis_points` | `Option<u64>` | âŒ | æ»‘ç‚¹å®¹å¿åº¦ï¼ˆåŸºç‚¹å•ä½ï¼Œä¾‹å¦‚ 100 = 1%, 500 = 5%ï¼‰ |
| `recent_blockhash` | `Hash` | âœ… | ç”¨äºäº¤æ˜“æœ‰æ•ˆæ€§çš„æœ€æ–°åŒºå—å“ˆå¸Œ |
| `with_tip` | `bool` | âœ… | äº¤æ˜“ä¸­æ˜¯å¦åŒ…å«å°è´¹ |
| `extension_params` | `Box<dyn ProtocolParams>` | âœ… | åè®®ç‰¹å®šå‚æ•° (PumpFunParams, PumpSwapParams ç­‰) |

### é«˜çº§é…ç½®å‚æ•°

| å‚æ•° | ç±»å‹ | å¿…éœ€ | æè¿° |
|------|------|------|------|
| `custom_cu_limit` | `Option<u32>` | âŒ | äº¤æ˜“çš„è‡ªå®šä¹‰è®¡ç®—å•å…ƒé™åˆ¶ |
| `lookup_table_key` | `Option<Pubkey>` | âŒ | ç”¨äºäº¤æ˜“ä¼˜åŒ–çš„åœ°å€æŸ¥æ‰¾è¡¨é”® |
| `wait_transaction_confirmed` | `bool` | âœ… | æ˜¯å¦ç­‰å¾…äº¤æ˜“ç¡®è®¤ |
| `create_wsol_ata` | `bool` | âœ… | æ˜¯å¦åˆ›å»º wSOL å…³è”ä»£å¸è´¦æˆ· |
| `close_wsol_ata` | `bool` | âœ… | äº¤æ˜“åæ˜¯å¦å…³é—­ wSOL ATA |
| `open_seed_optimize` | `bool` | âœ… | æ˜¯å¦ä½¿ç”¨ seed ä¼˜åŒ–ä»¥å‡å°‘ CU æ¶ˆè€— |


## å‚æ•°åˆ†ç±»

### ğŸ¯ æ ¸å¿ƒäº¤æ˜“å‚æ•°

è¿™äº›å‚æ•°å¯¹äºå®šä¹‰åŸºæœ¬äº¤æ˜“æ“ä½œè‡³å…³é‡è¦ï¼š

- **dex_type**: ç¡®å®šç”¨äºäº¤æ˜“çš„åè®®
- **mint**: æŒ‡å®šè¦äº¤æ˜“çš„ä»£å¸
- **sol_amount** (ä¹°å…¥) / **token_amount** (å–å‡º): å®šä¹‰äº¤æ˜“è§„æ¨¡
- **recent_blockhash**: ç¡®ä¿äº¤æ˜“æœ‰æ•ˆæ€§

### âš™ï¸ äº¤æ˜“æ§åˆ¶å‚æ•°

è¿™äº›å‚æ•°æ§åˆ¶äº¤æ˜“çš„å¤„ç†æ–¹å¼ï¼š

- **slippage_basis_points**: æ§åˆ¶å¯æ¥å—çš„ä»·æ ¼æ»‘ç‚¹
- **custom_cu_limit**: è¦†ç›–é»˜è®¤çš„è®¡ç®—å•å…ƒé™åˆ¶
- **wait_transaction_confirmed**: æ§åˆ¶æ˜¯å¦ç­‰å¾…ç¡®è®¤

### ğŸ”§ è´¦æˆ·ç®¡ç†å‚æ•°

è¿™äº›å‚æ•°æ§åˆ¶è‡ªåŠ¨è´¦æˆ·åˆ›å»ºå’Œç®¡ç†ï¼š

- **create_wsol_ata**: éœ€è¦æ—¶è‡ªåŠ¨å°† SOL åŒ…è£…ä¸º wSOL
- **close_wsol_ata**: äº¤æ˜“åè‡ªåŠ¨å°† wSOL è§£åŒ…è£…ä¸º SOL
- **create_mint_ata**: è‡ªåŠ¨åˆ›å»ºä»£å¸è´¦æˆ·

### ğŸš€ ä¼˜åŒ–å‚æ•°

è¿™äº›å‚æ•°å¯ç”¨é«˜çº§ä¼˜åŒ–ï¼š

- **lookup_table_key**: ä½¿ç”¨åœ°å€æŸ¥æ‰¾è¡¨å‡å°‘äº¤æ˜“å¤§å°
- **open_seed_optimize**: ä½¿ç”¨åŸºäº seed çš„è´¦æˆ·åˆ›å»ºä»¥é™ä½ CU æ¶ˆè€—

## é‡è¦è¯´æ˜

### ğŸŒ± Seed ä¼˜åŒ–

å½“ `open_seed_optimize: true` æ—¶ï¼š
- âš ï¸ **è­¦å‘Š**: ä½¿ç”¨ seed ä¼˜åŒ–è´­ä¹°çš„ä»£å¸å¿…é¡»é€šè¿‡æ­¤ SDK å‡ºå”®
- âš ï¸ **è­¦å‘Š**: å®˜æ–¹å¹³å°çš„å‡ºå”®æ–¹æ³•å¯èƒ½ä¼šå¤±è´¥
- ğŸ“ **æ³¨æ„**: ä½¿ç”¨ `get_associated_token_address_with_program_id_fast_use_seed` è·å– ATA åœ°å€

### ğŸ’° wSOL è´¦æˆ·ç®¡ç†

`create_wsol_ata` å’Œ `close_wsol_ata` å‚æ•°æä¾›ç²¾ç»†æ§åˆ¶ï¼š

- **ç‹¬ç«‹æ§åˆ¶**: åˆ›å»ºå’Œå…³é—­æ“ä½œå¯ä»¥åˆ†åˆ«æ§åˆ¶
- **æ‰¹é‡æ“ä½œ**: åˆ›å»ºä¸€æ¬¡ï¼Œå¤šæ¬¡äº¤æ˜“ï¼Œç„¶åå…³é—­
- **ç§Ÿé‡‘ä¼˜åŒ–**: å…³é—­è´¦æˆ·æ—¶è‡ªåŠ¨å›æ”¶ç§Ÿé‡‘

### ğŸ” åœ°å€æŸ¥æ‰¾è¡¨

ä½¿ç”¨ `lookup_table_key` ä¹‹å‰ï¼š
- åˆå§‹åŒ– `AddressLookupTableCache` æ¥ç®¡ç†ç¼“å­˜çš„æŸ¥æ‰¾è¡¨
- æŸ¥æ‰¾è¡¨å‡å°‘äº¤æ˜“å¤§å°å¹¶æé«˜æˆåŠŸç‡
- å¯¹äºæœ‰è®¸å¤šè´¦æˆ·å¼•ç”¨çš„å¤æ‚äº¤æ˜“ç‰¹åˆ«æœ‰ç›Š

### ğŸ“Š æ»‘ç‚¹é…ç½®

æ¨èçš„æ»‘ç‚¹è®¾ç½®ï¼š
- **ä¿å®ˆ**: 100-300 åŸºç‚¹ (1-3%)
- **ä¸­ç­‰**: 300-500 åŸºç‚¹ (3-5%)
- **æ¿€è¿›**: 500-1000 åŸºç‚¹ (5-10%)

### ğŸ¯ åè®®ç‰¹å®šå‚æ•°

æ¯ä¸ª DEX åè®®éœ€è¦ç‰¹å®šçš„ `extension_params`ï¼š
- **PumpFun**: `PumpFunParams`
- **PumpSwap**: `PumpSwapParams`
- **Bonk**: `BonkParams`
- **Raydium CPMM**: `RaydiumCpmmParams`
- **Raydium AMM V4**: `RaydiumAmmV4Params`

è¯·å‚é˜…ç›¸åº”çš„åè®®æ–‡æ¡£äº†è§£è¯¦ç»†çš„å‚æ•°è§„æ ¼ã€‚
